# 実装計画: 07_text_editing

## 1. 概要
Three.js (R3F) のキャンバス上のオブジェクトに対して、インラインでのテキスト表示および編集機能を追加します。`@react-three/drei` の `Html` コンポーネントを使用し、編集時には 2D の入力インターフェースをオーバーレイさせることで、自然な編集体験を提供します。

## 2. 実装ステップ
- [ ] **Step 1: データモデルの拡張**
    - `BaseObject` 型に `text`, `fontSize`, `fontColor`, `textAlign` などの属性を追加。
    - IndexedDB のスキーマ確認（既存の `properties` 内に含めるか検討）。
- [ ] **Step 2: テキスト表示コンポーネントの実装**
    - `Text` (drei) を使用したキャンバス内でのテキスト描画。
    - オブジェクトのサイズに合わせた配置ロジック。
- [ ] **Step 3: 編集モードの制御**
    - `useSpreadState` に `editingId` を追加。
    - ダブルクリックイベントで `editingId` をセット。
- [ ] **Step 4: インライン編集 UI (HTML Overlay)**
    - `Html` コンポーネントを用いた透明な `textarea` または `contenteditable` 要素の配置。
    - フォーカスアウト (Blur) 時にデータを確定・保存。
- [ ] **Step 5: ツールバー連携**
    - 選択中のオブジェクトがテキストを持つ場合、ツールバーにフォント操作系ボタンを追加。

## 3. ユーザーへの影響
- 図形（矩形、円形等）の中に文字を書き込めるようになります。
- アイデアのラベリングや、詳細なメモ書きが可能になり、キャンバスの表現力が向上します。
