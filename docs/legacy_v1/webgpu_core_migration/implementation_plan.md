# 実装計画: webgpu_core_migration

## 1. 概要
Three.js の次世代レンダラーである `WebGPURenderer` を導入し、Weave のグラフィックス基盤を刷新します。これにより、将来的な GPU Compute (Phase 2) や高度な PBR (Phase 5) の土台を築きます。同時に、WebGPU 非対応環境のための WebGL 2 フォールバックを確立し、アクセシビリティを維持します。

## 2. 実装ステップ
- [ ] **Step 1: 環境整備**
    - `three` の最新安定版へのアップデート。
    - `three/webgpu` からのインポート環境の構築。
- [ ] **Step 2: レンダラーの差し替え**
    - `THREE.WebGLRenderer` から `THREE.WebGPURenderer` への移行。
    - シーンの初期化ロジックの修正。
- [ ] **Step 3: フォールバックの実装**
    - `capabilities` をチェックし、WebGPU が利用不可なら自動的に WebGL 2 モードで起動するロジックの実装。
- [ ] **Step 4: マテリアルの TSL 移行 (POC)**
    - 最もシンプルなオブジェクト（背景やグリッド）を `TSL` を用いた Node Material に書き換え、描画を確認する。
- [ ] **Step 5: 既存機能の互換性テスト**
    - 既存の React Three Fiber (R3F) コンポーネントが正しく動作するか検証。

## 3. ユーザーへの影響
- **パフォーマンス向上**: WebGPU 対応ブラウザでは CPU 負荷が軽減され、描画がスムーズになります。
- **将来性**: 今後のアップデートで追加される数万個のオブジェクト描画や高度なビジュアル効果の恩恵を受けられるようになります。
- **互換性の維持**: WebGPU が使えない古いブラウザやモバイル環境でも、引き続き WebGL 2 で動作します。
