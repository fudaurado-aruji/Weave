# 実装計画: 09_3d_layer_prototype

## 1. 概要
「無限ホワイトボード」の概念を拡張し、垂直方向に重なる「別の世界」へのアクセスを可能にする。
今回のプロトタイプでは、ユーザーが明示的にレイヤーを切り替えることで、カメラの挙動と背景、そしてオブジェクトの配置ルールが変化する体験を構築する。

## 2. 実装ステップ
- [ ] **Step 1: State管理の拡張**
  - `src/store/useStore.ts` に `currentLayer: 1 | 2` を追加。
  - レイヤーごとにカメラのパラメータ（position, rotation）を保存・復旧できる仕組みを検討。
- [ ] **Step 2: ヘッダーUIの更新**
  - `src/App.tsx` のヘッダーに、現在のレイヤーを表示し切り替えることができるトグルスイッチを追加。
- [ ] **Step 3: 3D Studio層のビジュアル構築**
  - `src/App.tsx` の `Scene` コンポーネントを拡張。
  - `currentLayer === 2` の時に表示される `Ground` コンポーネントを作成。
  - 地平線を感じさせる広大なグリッドを表示。
- [ ] **Step 4: カメラ制御の切り替え**
  - `@react-three/drei` の `MapControls` (2D) と、より自由度の高い `OrbitControls` (3D) をレイヤーに応じて切り替える。
  - 2層目では回転（Rotation）を有効化。
- [ ] **Step 5: 3Dオブジェクトの配置調整**
  - 2層目でオブジェクトを生成・移動する際、Z座標のオフセットや法線方向への吸着の基礎となるロジックを準備。

## 3. ユーザーへの影響
- ヘッダーのスイッチ一つで、フラットな作業空間から広大な3D空間へダイブできるようになる。
- 3D空間ではカメラを自由に回し、ヤカン（ティーポッド）や付箋を多角的に眺めることが可能になる。
